"use strict";(self.webpackChunkmy_grocery_store_app=self.webpackChunkmy_grocery_store_app||[]).push([[185],{185:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(43),r=s(785),l=s(579);const c=e=>{let{orders:t,products:s}=e;const a=(new Date).toISOString().split("T")[0],c=t.filter(e=>e.date.startsWith(a)),n=c.reduce((e,t)=>e+t.totalAmount,0),o=s.filter(e=>0===e.stock).length,i=s.filter(e=>e.stock>0).length,d=e=>{let{orderList:t}=e;return(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Order ID"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Date"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Customer"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Items"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Total"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"p-4 font-mono text-sm text-slate-700",children:e._id||e.id}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:"Tirth"}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:e.items.reduce((e,t)=>e+t.quantity,0)}),(0,l.jsxs)("td",{className:"p-4 font-semibold text-slate-800",children:["\u20b9",e.totalAmount.toFixed(2)]})]},e._id||e.id))})]})})};return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-slate-800",children:"Today's Activity"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsxs)(r.A,{children:[(0,l.jsx)("h3",{className:"text-slate-500 font-semibold",children:"Today's Revenue"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-slate-800",children:["\u20b9",n.toFixed(2)]})]}),(0,l.jsxs)(r.A,{children:[(0,l.jsx)("h3",{className:"text-slate-500 font-semibold",children:"Today's Orders"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:c.length})]}),(0,l.jsxs)(r.A,{children:[(0,l.jsx)("h3",{className:"text-slate-500 font-semibold",children:"Running Products"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:i})]}),(0,l.jsxs)(r.A,{children:[(0,l.jsx)("h3",{className:"text-slate-500 font-semibold",children:"Out of Stock"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:o})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-slate-800",children:"Recent Orders"}),(0,l.jsx)(r.A,{children:(0,l.jsx)(d,{orderList:t.slice(-5).reverse()})})]})]})};var n=s(555),o=s(835),i=s(739);const d=e=>{let{products:t,setProducts:s,categories:c,errors:d,setErrors:m}=e;const[x,h]=(0,a.useState)(null),[p,u]=(0,a.useState)(!1),[g,b]=(0,a.useState)({name:"",price:"",category:"",image:"",stock:""}),j=(0,a.useCallback)(async()=>{try{const e=await fetch("http://localhost:5000/api/groceries");if(e.ok){const t=await e.json();s(t)}else console.error("Failed to fetch products")}catch(e){console.error("Error fetching products:",e)}},[s]);(0,a.useEffect)(()=>{j()},[j]);const f=e=>{const{id:t,value:s,files:a}=e.target;"image"===t&&a&&a[0]?b(e=>(0,n.A)((0,n.A)({},e),{},{image:a[0]})):b(e=>(0,n.A)((0,n.A)({},e),{},{[t]:s}))};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Product Management"}),(0,l.jsx)(o.A,{onClick:()=>{m({}),h(null),b({name:"",price:"",category:"",image:"",stock:""}),u(!0)},className:"w-auto px-6",children:"Add New Product"})]}),p&&(0,l.jsxs)(r.A,{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:x?"Edit Product":"Add New Product"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return g.name||(e.name="Product name is required."),(!g.price||g.price<=0)&&(e.price="Price must be a positive number."),(g.stock<0||""===g.stock)&&(e.stock="Stock must be 0 or more."),g.category||(e.category="Category is required."),m(e),0===Object.keys(e).length})())return;const t=new FormData;t.append("name",g.name),t.append("price",g.price),t.append("category",g.category),t.append("stock",g.stock),(g.image instanceof File||x)&&t.append("image",g.image);try{let e;if(e=x?await fetch("http://localhost:5000/api/groceries/".concat(x._id),{method:"PUT",body:t}):await fetch("http://localhost:5000/api/groceries",{method:"POST",body:t}),e.ok)u(!1),b({name:"",price:"",category:"",image:"",stock:""}),h(null),j();else{const t=await e.json();m((0,n.A)((0,n.A)({},d),{},{general:t.error||"Failed to save product"}))}}catch(s){m((0,n.A)((0,n.A)({},d),{},{general:"Error saving product"})),console.error("Error saving product:",s)}},className:"space-y-4",children:[(0,l.jsx)(i.A,{id:"name",type:"text",label:"Product Name",value:g.name,onChange:f,error:d.name}),(0,l.jsx)(i.A,{id:"price",type:"number",label:"Price",value:g.price,onChange:f,error:d.price}),(0,l.jsx)(i.A,{id:"stock",type:"number",label:"Stock Quantity",value:g.stock,onChange:f,error:d.stock}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-600 mb-1",children:"Category"}),(0,l.jsxs)("select",{id:"category",value:g.category,onChange:f,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-1 ".concat(d.category?"border-red-500 ring-red-500":"border-slate-300 focus:ring-green-500"),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select a category"}),c.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e._id||e.id))]}),d.category&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.category})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-slate-600 mb-1",children:"Product Image"}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[g.image&&(0,l.jsx)("img",{src:g.image instanceof File?URL.createObjectURL(g.image):g.image,alt:"Preview",className:"w-20 h-20 object-cover rounded-md bg-slate-100"}),(0,l.jsx)("input",{id:"image",type:"file",accept:"image/*",onChange:f,className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"})]})]}),d.general&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:d.general}),(0,l.jsxs)("div",{className:"flex space-x-4 pt-2",children:[(0,l.jsx)(o.A,{type:"submit",children:x?"Update Product":"Create Product"}),(0,l.jsx)(o.A,{onClick:()=>u(!1),className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})]}),(0,l.jsx)(r.A,{children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Name"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Category"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Price"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Stock"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"p-4 font-semibold text-slate-800",children:e.name}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:e.category}),(0,l.jsxs)("td",{className:"p-4 text-slate-700",children:["\u20b9",e.price.toFixed(2)]}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:e.stock>0?e.stock:(0,l.jsx)("span",{className:"text-red-500 font-semibold",children:"Out of Stock"})}),(0,l.jsxs)("td",{className:"p-4 flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>(e=>{m({}),h(e),b({name:e.name,price:e.price,category:e.category,image:e.image,stock:e.stock}),u(!0)})(e),className:"text-green-600 hover:underline font-semibold",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("http://localhost:5000/api/groceries/".concat(e),{method:"DELETE"})).ok?j():console.error("Failed to delete product")}catch(t){console.error("Error deleting product:",t)}})(e._id||e.id),className:"text-red-500 hover:underline font-semibold",children:"Delete"})]})]},e._id||e.id))})]})})]})},m=e=>{let{categories:t,setCategories:s,errors:c,setErrors:d}=e;const[m,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[u,g]=(0,a.useState)({name:"",description:"",image:""}),b=e=>{const{id:t,value:s,files:a}=e.target;"categoryImage"===t&&a&&a[0]?g(e=>(0,n.A)((0,n.A)({},e),{},{image:a[0]})):g(e=>(0,n.A)((0,n.A)({},e),{},{[t]:s}))};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Category Management"}),(0,l.jsx)(o.A,{onClick:()=>{d({}),x(null),g({name:"",description:"",image:null}),p(!0)},className:"w-auto px-6",children:"Add New Category"})]}),h&&(0,l.jsxs)(r.A,{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Category":"Add New Category"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return u.name||(e.name="Category name is required."),d(e),0===Object.keys(e).length})())return;const{name:t,description:a,image:r}=u,l=new FormData;l.append("name",t),l.append("description",a),r instanceof File&&l.append("image",r);try{let e;if(e=m?await fetch("http://localhost:5000/api/categories/".concat(m._id),{method:"PUT",body:l}):await fetch("http://localhost:5000/api/categories",{method:"POST",body:l}),!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const t=await e.json();console.log("Category saved:",t);const a=await fetch("http://localhost:5000/api/categories");if(!a.ok)throw new Error("Failed to refetch categories: ".concat(a.status));const r=await a.json();s(r),p(!1),d({})}catch(o){console.error("Failed to save category:",o),d((0,n.A)((0,n.A)({},c),{},{general:"Failed to save category: ".concat(o.message)}))}},className:"space-y-4",children:[(0,l.jsx)(i.A,{id:"name",type:"text",label:"Category Name",value:u.name,onChange:b,error:c.name}),(0,l.jsx)(i.A,{id:"description",type:"text",label:"Category Description",value:u.description,onChange:b}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"categoryImage",className:"block text-sm font-medium text-slate-600 mb-1",children:"Category Image"}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[u.image&&(0,l.jsx)("img",{src:u.image instanceof File?URL.createObjectURL(u.image):u.image,alt:"Preview",className:"w-20 h-20 object-cover rounded-md bg-slate-100"}),(0,l.jsx)("input",{id:"categoryImage",type:"file",accept:"image/*",onChange:b,className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"})]})]}),c.general&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:c.general}),(0,l.jsxs)("div",{className:"flex space-x-4 pt-2",children:[(0,l.jsx)(o.A,{type:"submit",children:m?"Update Category":"Create Category"}),(0,l.jsx)(o.A,{onClick:()=>p(!1),className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})]}),(0,l.jsx)(r.A,{children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Image"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Category Name"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Description"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"p-4",children:(0,l.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded-md"})}),(0,l.jsx)("td",{className:"p-4 font-semibold text-slate-800",children:e.name}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:e.description||"No description"}),(0,l.jsxs)("td",{className:"p-4 flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>{return t=e,d({}),x(t),g({name:t.name,description:t.description||"",image:t.image||null}),void p(!0);var t},className:"text-green-600 hover:underline font-semibold",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>(async e=>{try{await fetch("http://localhost:5000/api/categories/".concat(e),{method:"DELETE"}),s(t.filter(t=>t._id!==e))}catch(a){console.error("Failed to delete category:",a)}})(e._id||e.id),className:"text-red-500 hover:underline font-semibold",children:"Delete"})]})]},e._id||e.id))})]})})]})},x=e=>{let{discountCodes:t,setDiscountCodes:s,errors:c,setErrors:d}=e;const[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)({code:"",discountPercentage:"",limit:""}),u=(0,a.useCallback)(async()=>{try{const e=await fetch("http://localhost:5000/api/discounts");if(e.ok){const t=await e.json();s(t)}else console.error("Failed to fetch discounts")}catch(e){console.error("Error fetching discounts:",e)}},[s]);(0,a.useEffect)(()=>{u()},[u]);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Discount Code Management"}),(0,l.jsx)(o.A,{onClick:()=>{d({}),x(!0),p({code:"",discountPercentage:"",limit:""})},className:"w-auto px-6",children:"Create New Code"})]}),m&&(0,l.jsxs)(r.A,{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create New Discount Code"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return h.code||(e.code="Discount code is required."),(!h.discountPercentage||h.discountPercentage<=0||h.discountPercentage>100)&&(e.discountPercentage="Discount must be between 1 and 100."),(!h.limit||h.limit<=0)&&(e.limit="Usage limit must be a positive number."),d(e),0===Object.keys(e).length})())try{const e=await fetch("http://localhost:5000/api/discounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:h.code.toUpperCase(),discountPercentage:parseInt(h.discountPercentage),limit:parseInt(h.limit)})});if(e.ok)x(!1),p({code:"",discountPercentage:"",limit:""}),u();else{const t=await e.json();d((0,n.A)((0,n.A)({},c),{},{general:t.error||"Failed to create discount"}))}}catch(t){d((0,n.A)((0,n.A)({},c),{},{general:"Error creating discount"})),console.error("Error creating discount:",t)}},className:"space-y-4",children:[(0,l.jsx)(i.A,{id:"code",type:"text",label:"Discount Code",value:h.code,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{code:e.target.value})),error:c.code}),(0,l.jsx)(i.A,{id:"discountPercentage",type:"number",label:"Discount (%)",value:h.discountPercentage,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{discountPercentage:e.target.value})),error:c.discountPercentage}),(0,l.jsx)(i.A,{id:"limit",type:"number",label:"Usage Limit",value:h.limit,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{limit:e.target.value})),error:c.limit}),c.general&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:c.general}),(0,l.jsxs)("div",{className:"flex space-x-4 pt-2",children:[(0,l.jsx)(o.A,{type:"submit",children:"Create Code"}),(0,l.jsx)(o.A,{onClick:()=>x(!1),className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})]}),(0,l.jsx)(r.A,{children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Code"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Discount"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Usage"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"p-4 font-semibold font-mono text-slate-800",children:e.code}),(0,l.jsxs)("td",{className:"p-4 text-slate-700",children:[e.discountPercentage,"%"]}),(0,l.jsxs)("td",{className:"p-4 text-slate-700",children:[e.usedCount," / ",e.limit]}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("http://localhost:5000/api/discounts/".concat(e),{method:"DELETE"})).ok?u():console.error("Failed to delete discount")}catch(t){console.error("Error deleting discount:",t)}})(e._id||e.id),className:"text-red-500 hover:underline font-semibold",children:"Delete"})})]},e._id||e.id))})]})})]})},h=e=>{let{orders:t}=e;const s=e=>{let{orderList:t}=e;return(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Order ID"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Date"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Customer"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Items"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Total"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"p-4 font-mono text-sm text-slate-700",children:e._id||e.id}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:"Tirth"}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:e.items.reduce((e,t)=>e+t.quantity,0)}),(0,l.jsxs)("td",{className:"p-4 font-semibold text-slate-800",children:["\u20b9",e.totalAmount.toFixed(2)]})]},e._id||e.id))})]})})};return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-slate-800",children:"All Orders"}),(0,l.jsx)(r.A,{children:t.length>0?(0,l.jsx)(s,{orderList:[...t].reverse()}):(0,l.jsx)("p",{children:"No orders have been placed yet."})})]})},p=e=>{let{banners:t,setBanners:s,errors:c,setErrors:d}=e;const[m,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[u,g]=(0,a.useState)({title:"",description:"",discount:"",image:null}),b=e=>{const{id:t,value:s,files:a}=e.target;"bannerImage"===t&&a&&a[0]?g(e=>(0,n.A)((0,n.A)({},e),{},{image:a[0]})):g(e=>(0,n.A)((0,n.A)({},e),{},{[t]:s}))};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Banner Management"}),(0,l.jsx)(o.A,{onClick:()=>{d({}),x(null),g({title:"",description:"",discount:"",image:null}),p(!0)},className:"w-auto px-6",children:"Add New Banner"})]}),h&&(0,l.jsxs)(r.A,{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Banner":"Add New Banner"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return u.title||(e.title="Banner title is required."),(!u.discount||u.discount<=0||u.discount>100)&&(e.discount="Discount must be between 1 and 100."),d(e),0===Object.keys(e).length})())return;const{title:t,description:a,discount:r,image:l}=u,o=new FormData;o.append("title",t),o.append("description",a),o.append("discount",r),l instanceof File&&o.append("image",l);try{let e;if(e=m?await fetch("http://localhost:5000/api/banners/".concat(m._id),{method:"PUT",body:o}):await fetch("http://localhost:5000/api/banners/upload",{method:"POST",body:o}),!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const t=await e.json();console.log("Banner saved:",t);const a=await fetch("http://localhost:5000/api/banners");if(!a.ok)throw new Error("Failed to refetch banners: ".concat(a.status));const r=await a.json();s(r),p(!1),d({})}catch(i){console.error("Failed to save banner:",i),d((0,n.A)((0,n.A)({},c),{},{general:"Failed to save banner: ".concat(i.message)}))}},className:"space-y-4",children:[(0,l.jsx)(i.A,{id:"title",type:"text",label:"Banner Title",value:u.title,onChange:b,error:c.title}),(0,l.jsx)(i.A,{id:"description",type:"text",label:"Description",value:u.description,onChange:b}),(0,l.jsx)(i.A,{id:"discount",type:"number",label:"Discount (%)",value:u.discount,onChange:b,error:c.discount}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"bannerImage",className:"block text-sm font-medium text-slate-600 mb-1",children:"Banner Image"}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[u.image&&(0,l.jsx)("img",{src:u.image instanceof File?URL.createObjectURL(u.image):u.image,alt:"Preview",className:"w-20 h-20 object-cover rounded-md bg-slate-100"}),(0,l.jsx)("input",{id:"bannerImage",type:"file",accept:"image/*",onChange:b,className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"})]})]}),c.general&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:c.general}),(0,l.jsxs)("div",{className:"flex space-x-4 pt-2",children:[(0,l.jsx)(o.A,{type:"submit",children:m?"Update Banner":"Create Banner"}),(0,l.jsx)(o.A,{onClick:()=>p(!1),className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})]}),(0,l.jsx)(r.A,{children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Image"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Title"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Description"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Discount"}),(0,l.jsx)("th",{className:"p-4 text-slate-600",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"p-4",children:(0,l.jsx)("img",{src:"http://localhost:5000".concat(e.imageUrl),alt:e.title,className:"w-16 h-16 object-cover rounded-md"})}),(0,l.jsx)("td",{className:"p-4 font-semibold text-slate-800",children:e.title}),(0,l.jsx)("td",{className:"p-4 text-slate-700",children:e.description}),(0,l.jsxs)("td",{className:"p-4 text-slate-700",children:[e.discount,"%"]}),(0,l.jsxs)("td",{className:"p-4 flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>(e=>{d({}),x(e),g({title:e.title,description:e.description,discount:e.discount,image:null}),p(!0)})(e),className:"text-green-600 hover:underline font-semibold",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>(async e=>{try{await fetch("http://localhost:5000/api/banners/".concat(e),{method:"DELETE"}),s(t.filter(t=>t._id!==e))}catch(a){console.error("Failed to delete banner:",a)}})(e._id),className:"text-red-500 hover:underline font-semibold",children:"Delete"})]})]},e._id))})]})})]})},u=e=>{let{products:t,setProducts:s,orders:r,categories:n,setCategories:o,discountCodes:i,setDiscountCodes:u}=e;const[g,b]=(0,a.useState)("overview"),[j,f]=(0,a.useState)({}),[N,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{fetch("http://localhost:5000/api/banners").then(e=>e.json()).then(e=>y(e)).catch(e=>console.error("Failed to fetch banners:",e))},[]);const v=()=>(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-2 mb-8 flex space-x-2 overflow-x-auto",children:[(0,l.jsx)("button",{onClick:()=>b("overview"),className:"px-4 py-2 rounded-md font-semibold whitespace-nowrap ".concat("overview"===g?"bg-green-600 text-white":"bg-transparent text-slate-600 hover:bg-green-50"),children:"Overview"}),(0,l.jsx)("button",{onClick:()=>b("products"),className:"px-4 py-2 rounded-md font-semibold whitespace-nowrap ".concat("products"===g?"bg-green-600 text-white":"bg-transparent text-slate-600 hover:bg-green-50"),children:"Products"}),(0,l.jsx)("button",{onClick:()=>b("categories"),className:"px-4 py-2 rounded-md font-semibold whitespace-nowrap ".concat("categories"===g?"bg-green-600 text-white":"bg-transparent text-slate-600 hover:bg-green-50"),children:"Categories"}),(0,l.jsx)("button",{onClick:()=>b("banners"),className:"px-4 py-2 rounded-md font-semibold whitespace-nowrap ".concat("banners"===g?"bg-green-600 text-white":"bg-transparent text-slate-600 hover:bg-green-50"),children:"Banners"}),(0,l.jsx)("button",{onClick:()=>b("discounts"),className:"px-4 py-2 rounded-md font-semibold whitespace-nowrap ".concat("discounts"===g?"bg-green-600 text-white":"bg-transparent text-slate-600 hover:bg-green-50"),children:"Discounts"}),(0,l.jsx)("button",{onClick:()=>b("orders"),className:"px-4 py-2 rounded-md font-semibold whitespace-nowrap ".concat("orders"===g?"bg-green-600 text-white":"bg-transparent text-slate-600 hover:bg-green-50"),children:"Orders"})]});return(0,l.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-10 min-h-[calc(100vh-80px)]",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Admin Panel"}),(0,l.jsx)(v,{}),"overview"===g&&(0,l.jsx)(c,{orders:r,products:t}),"products"===g&&(0,l.jsx)(d,{products:t,setProducts:s,categories:n,errors:j,setErrors:f}),"categories"===g&&(0,l.jsx)(m,{categories:n,setCategories:o,errors:j,setErrors:f}),"banners"===g&&(0,l.jsx)(p,{banners:N,setBanners:y,errors:j,setErrors:f}),"discounts"===g&&(0,l.jsx)(x,{discountCodes:i,setDiscountCodes:u,errors:j,setErrors:f}),"orders"===g&&(0,l.jsx)(h,{orders:r})]})}},785:(e,t,s)=>{s.d(t,{A:()=>r});s(43);var a=s(579);const r=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm ".concat(s),children:t})}}}]);
//# sourceMappingURL=185.e23c1a9c.chunk.js.map