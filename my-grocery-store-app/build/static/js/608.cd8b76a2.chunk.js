"use strict";(self.webpackChunkmy_grocery_store_app=self.webpackChunkmy_grocery_store_app||[]).push([[608],{608:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var a=r(555),t=r(43),n=r(785),c=r(835),l=r(739),d=r(579);const i=e=>{let{setPage:s,clearCart:r,cart:i,user:o,addOrder:m,discountCodes:u,applyDiscountCode:x}=e;const[p,h]=(0,t.useState)("card"),[g,b]=(0,t.useState)(""),[j,y]=(0,t.useState)(""),[f,N]=(0,t.useState)(null),[v,C]=(0,t.useState)(""),[w,A]=(0,t.useState)({name:"",number:"",expiry:"",cvc:""}),[S,k]=(0,t.useState)({}),D=i.reduce((e,s)=>e+s.price*s.quantity,0),P=f?D*f.discountPercentage/100:0,q=D-P,M=e=>{if(e.preventDefault(),!(()=>{if("card"!==p)return!0;const e={};return w.name||(e.name="Name is required."),(!w.number||w.number.length<16)&&(e.number="Valid card number is required."),w.expiry||(e.expiry="Expiry date is required."),(!w.cvc||w.cvc.length<3)&&(e.cvc="CVC is required."),k(e),0===Object.keys(e).length})())return;const a={id:"ORD-".concat(Date.now()),date:(new Date).toISOString(),userId:o.id,userName:o.name,items:i.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity})),totalAmount:q,discountApplied:f?f.code:null};m(a),f&&x(f.code),b("Payment successful! Thank you for your order."),r(),setTimeout(()=>s("home"),3e3)},O=e=>{A((0,a.A)((0,a.A)({},w),{},{[e.target.id.replace("card","").toLowerCase()]:e.target.value}))};return(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,d.jsxs)("div",{className:"w-full max-w-lg",children:[(0,d.jsx)("h2",{className:"text-3xl font-bold text-center text-slate-800 mb-6",children:"Checkout"}),g?(0,d.jsx)(n.A,{children:(0,d.jsx)("p",{className:"bg-green-100 text-green-700 p-4 rounded-lg text-center font-medium",children:g})}):(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[(0,d.jsxs)(n.A,{className:"md:col-span-1",children:[(0,d.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Payment Method"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer ".concat("card"===p?"border-green-500 ring-2 ring-green-500":"border-slate-300"),children:[(0,d.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===p,onChange:()=>h("card"),className:"form-radio text-green-600"}),(0,d.jsx)("span",{className:"ml-4 font-semibold",children:"Credit/Debit Card"})]}),(0,d.jsxs)("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer ".concat("cod"===p?"border-green-500 ring-2 ring-green-500":"border-slate-300"),children:[(0,d.jsx)("input",{type:"radio",name:"paymentMethod",value:"cod",checked:"cod"===p,onChange:()=>h("cod"),className:"form-radio text-green-600"}),(0,d.jsx)("span",{className:"ml-4 font-semibold",children:"Cash on Delivery"})]})]}),"card"===p&&(0,d.jsxs)("form",{id:"payment-form",onSubmit:M,className:"space-y-4 mt-6",children:[(0,d.jsx)(l.A,{id:"cardName",type:"text",label:"Name on Card",placeholder:"John M. Doe",value:w.name,onChange:O,error:S.name}),(0,d.jsx)(l.A,{id:"cardNumber",type:"text",label:"Card Number",placeholder:"1111-2222-3333-4444",value:w.number,onChange:O,error:S.number}),(0,d.jsxs)("div",{className:"flex space-x-4",children:[(0,d.jsx)("div",{className:"w-1/2",children:(0,d.jsx)(l.A,{id:"expiry",type:"text",label:"Expiry Date",placeholder:"MM/YY",value:w.expiry,onChange:O,error:S.expiry})}),(0,d.jsx)("div",{className:"w-1/2",children:(0,d.jsx)(l.A,{id:"cvc",type:"text",label:"CVC",placeholder:"123",value:w.cvc,onChange:O,error:S.cvc})})]})]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(n.A,{children:[(0,d.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Discount Code"}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Enter code",value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500"}),(0,d.jsx)(c.A,{onClick:()=>{const e=u.find(e=>e.code.toLowerCase()===j.toLowerCase());e?e.usedCount<e.limit?(N(e),C("")):(C("This discount code has expired."),N(null)):(C("Invalid discount code."),N(null))},className:"w-auto px-6",children:"Apply"})]}),v&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-2",children:v}),f&&(0,d.jsxs)("p",{className:"text-green-600 font-semibold text-sm mt-2",children:['"',f.code,'" applied! You get ',f.discountPercentage,"% off."]})]}),(0,d.jsxs)(n.A,{children:[(0,d.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-slate-600",children:[(0,d.jsx)("span",{children:"Subtotal"}),(0,d.jsxs)("span",{children:["\u20b9",D.toFixed(2)]})]}),f&&(0,d.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,d.jsxs)("span",{children:["Discount (",f.discountPercentage,"%)"]}),(0,d.jsxs)("span",{children:["- \u20b9",P.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-4 mt-2",children:[(0,d.jsx)("span",{children:"Total"}),(0,d.jsxs)("span",{children:["\u20b9",q.toFixed(2)]})]})]}),(0,d.jsx)(c.A,{onClick:M,form:"card"===p?"payment-form":"",type:"card"===p?"submit":"button",className:"mt-6",children:"cod"===p?"Place Order":"Pay Now"})]})]})]})]})})}},785:(e,s,r)=>{r.d(s,{A:()=>t});r(43);var a=r(579);const t=e=>{let{children:s,className:r=""}=e;return(0,a.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm ".concat(r),children:s})}}}]);
//# sourceMappingURL=608.cd8b76a2.chunk.js.map